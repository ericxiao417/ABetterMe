# 代理

## 正向代理（forward proxy）

概念：是一个位于客户端和目标服务器之间的服务器，即代理服务器。为了从目标服务器取得内容，客户端向代理服务器发送一个请求并且指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端。



比如，想要访问国外的某个网站，该网站无法在国内直接访问，可以访问到一个代理服务器，这个代理服务器可以访问到这个国外网站。这样，对国外的网站的请求需要通过代理服务器来转发请求，并且该代理服务器也会将请求的响应返回给用户。



所谓正向代理，就是代理服务器代理了客户端，去和目标服务器进行交互。



正向代理的优点：

1. 突破访问限制。
2. 提高访问速度。
3. 隐藏客户端真实IP。

## 反向代理（reverse proxy）

概念：是指以代理服务器来接受internet上的请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给客户端，此时代理服务器的表现就是一个反向代理服务器。



常用的场景：在Web开发中用到的负载均衡器，客户端发送请求到负载均衡器，负载均衡器再把请求转发给一台真正的服务器来执行，再把执行结果返回给客户端。



所以，反向代理，其实是代理服务器代理了目标服务器，去和客户端进行交互。通过反向代理服务器访问目标服务器时，客户端是不知道真正的目标服务器是谁的，甚至不知道自己访问的是一个代理服务器。



优点：

1. 隐藏服务器的真实IP。
2. 负载均衡。
3. 提高访问速度。
4. 提供安全保障：反向代理服务器可以作为应用层的防火墙，为网站提供对基于Web的攻击行为的防护，例如Dos/DDoS，更容易排查恶意软件。还可以为后端服务器统一提供加密和SSL加速，提供HTTP访问认证等。

## 二者区别

1. 正向代理其实是客户端的代理，帮助客户端访问其无法访问到的资源。反向代理则是服务器的代理，帮助服务器做负载均衡、安全防护等。
2. 正向代理一般是客户端架设的，比如在自己的机器上安装一个代理软件。而反向代理服务器一般是服务器架设的，比如在自己的机器群中部署一个负载均衡。
3. 正向代理中，服务器不知道真正的客户端是谁。反向代理中，客户端不知道真正的服务器是谁。
4. 正向代理是用来解决访问限制问题，而反向代理则是提供负载均衡、安全防护等作用，二者都能提高访问速度。





